(this.webpackJsonppuhelinluettelo=this.webpackJsonppuhelinluettelo||[]).push([[0],{15:function(e,n,t){e.exports=t(37)},37:function(e,n,t){"use strict";t.r(n);var r=t(0),a=t.n(r),c=t(14),u=t.n(c),o=t(4),l=t(3),i=function(e){var n=e.person,t=e.deleteHandler;return n.display?a.a.createElement("div",null,n.name," ",n.number," ",a.a.createElement("button",{onClick:function(){return t(n.id,n.name)}},"Delete")):null},d=function(e){var n=e.persons,t=e.deleteHandler;return a.a.createElement("div",null,n.map((function(e){return a.a.createElement(i,{key:e.id,person:e,deleteHandler:t})})))},s=function(e){var n=e.handler;return a.a.createElement("div",null,"filter: ",a.a.createElement("input",{onChange:n}))},m=function(e){var n=e.inputs,t=e.submit;return a.a.createElement("form",{onSubmit:t},n.map((function(e){return a.a.createElement("div",{key:e.id},e.text,": ",a.a.createElement("input",{value:e.value,onChange:e.handler}))})),a.a.createElement("div",null,a.a.createElement("button",{type:"submit"},"add")))},f={error:{color:"red",fontSize:16,border:"solid 1px black",width:"100%",padding:"3px",backgroundColor:"#eaeaea",margin:"5px"},success:{color:"green",fontSize:16,border:"solid 1px black",width:"100%",padding:"3px",backgroundColor:"#eaeaea",margin:"5px"}},p=function(e){var n=e.message,t=e.type;return null===n?null:"success"===t?a.a.createElement("div",{style:f.success},n):"error"===t?a.a.createElement("div",{style:f.error},n):null},b=t(2),h=t.n(b),v="http://localhost:3001/api/persons",E=function(){return h.a.get(v).then((function(e){return e.data}))},g=function(e){return h.a.post(v,e).then((function(e){return e.data}))},y=function(e,n){return h.a.put("".concat(v,"/").concat(e),n).then((function(e){return e.data}))},w=function(e){return h.a.delete("".concat(v,"/").concat(e)).then((function(e){return e}))},j=function(){var e=Object(r.useState)([]),n=Object(l.a)(e,2),t=n[0],c=n[1],u=Object(r.useState)(""),i=Object(l.a)(u,2),f=i[0],b=i[1],h=Object(r.useState)(""),v=Object(l.a)(h,2),j=v[0],k=v[1],O=Object(r.useState)({}),x=Object(l.a)(O,2),C=x[0],S=x[1];Object(r.useEffect)((function(){E().then((function(e){c(e)}))}),[]);var H=function(e,n){S({content:e,type:n}),setTimeout((function(){return S({})}),5e3)},P=[{text:"name",id:1,value:f,handler:function(e){b(e.target.value)}},{text:"number",id:2,value:j,handler:function(e){k(e.target.value)}}];return a.a.createElement("div",null,a.a.createElement(p,{message:C.content,type:C.type}),a.a.createElement("h2",null,"Phonebook"),a.a.createElement(s,{handler:function(e){var n=t.filter((function(n){return n.name.toLowerCase().includes(e.target.value.toLowerCase())}));c(t.map((function(e){return n.includes(e)?Object(o.a)({},e,{display:!0}):Object(o.a)({},e,{display:!1})})))}}),a.a.createElement("br",null),a.a.createElement("h2",null,"Add new person"),a.a.createElement(m,{inputs:P,submit:function(e){e.preventDefault();var n=t.filter((function(e){return e.name===f}));n.length>0&&window.confirm("This phonebook already includes ".concat(f,". Replace the person with new number?"))?n.map((function(e){return y(e.id,{id:e.id,name:f,number:j,display:!0}).then((function(n){c(t.filter((function(n){return n.id!==e.id})).concat(n)),b(""),k(""),H("Person ".concat(n.name," updated"),"success")})).catch((function(n){H("Person ".concat(f," already deleted from server."),"error"),c(t.filter((function(n){return n.id!==e.id}))),b(""),k("")}))})):g({name:f,number:j,display:!0}).then((function(e){c(t.concat(e)),b(""),k(""),H("Added new person ".concat(e.name),"success")}))}}),a.a.createElement("h2",null,"Numbers"),a.a.createElement(d,{persons:t,deleteHandler:function(e,n){window.confirm("Delete person ".concat(n,"?"))&&w(e).then((function(r){c(t.filter((function(n){return n.id!==e}))),H("Person ".concat(n," deleted"),"success")}))}}))};u.a.render(a.a.createElement(j,null),document.getElementById("root"))}},[[15,1,2]]]);
//# sourceMappingURL=main.cea3d64f.chunk.js.map